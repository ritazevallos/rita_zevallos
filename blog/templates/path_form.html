{% extends "base.html" %}
{% block content %}

<div class="content">
<form action="" method="post">
    {% csrf_token %}

    {% if form.errors %}
        {% for error in form.non_field_errors %}
            <div class="alert alert-error">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endif %}

    <div class="fieldWrapper">
        {{ form.title.errors }}
        <label for="{{ form.title.id_for_label }}">Path title:</label>
        {{ form.title }}
    </div>

    <h3>Add node</h3>
    <div id="new_node_wrapper">
        Loading node form...
    </div>

    <h3>Existing nodes</h3>
    <div id="existing_nodes_container" class="fieldWrapper">
        {{ form.nodes.errors }}
        {{ form.nodes.label_tag }}
        {{ form.nodes }}
    </div>


    <input type="submit" value="Submit" />
</form>
</div>
<script>

$(function(){
    var url = "{% url new_node %}";
    $('#new_node_wrapper').load(url);
})
</script>

{% endblock %}